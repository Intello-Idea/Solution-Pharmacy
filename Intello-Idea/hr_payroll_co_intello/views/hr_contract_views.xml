<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Inherit Form View to HR Contract -->
        <record id="hr_contract_inherit_form_view" model="ir.ui.view">
            <field name="name">hr_contract_inherit_form_view</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='company_id']" position="replace"/>

                <xpath expr="//field[@name='job_id']" position="replace">
                </xpath>

                <xpath expr="//field[@name='trial_date_end']" position="after">
                    <field name="contract_type" required="1"/>
                </xpath>

                <xpath expr="//group[1]/group[2]" position="inside">
                    <field name="eps_id" required="1" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                    <field name="arl_id" required="1" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                    <field name="ccf_id" required="1" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                    <field name="pension_fund_id" required="1"
                           options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                    <field name="cesantia_fund_id" required="1"
                           options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                </xpath>

                <field name="employee_id" position="after">
                    <field name="identification_id"/>
                </field>

                <field name="advantages" position="before">
                    <field name="integral_salary"/>
                </field>

                <field name="department_id" position="after">
                    <field name="job_id"/>
                    <field name="company_id" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                </field>


                <xpath expr="//group[@name='duration_group']" position="after">
                    <group string="Contract Details" name="contract_detail">
                        <field name="structure_type_id" required="1"
                               options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                        <field name="payment_frequency"/>
                        <field name="cotizante_type_id" required="1"
                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"/>
                        <field name="cotizante_subtype_id" required="1"
                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                               domain="[('active','=',True),('cotizante_type_ids','=',cotizante_type_id)]"/>
                        <field name="risk_work_id" required="1"
                               options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                        <field name="risk_class" required="1"/>
                        <field name="risk_percentage" required="1"/>
                    </group>
                    <group string="Liquidation" name="liquidation">
                        <field name="liquidation_date"/>
                        <field name="withdrawal_reason" attrs="{'required':[('liquidation_date','!=',False)]}"/>
                    </group>
                </xpath>

                <!-- Page -->
                <page name="information" position="after">
                    <page name="withholding_tax" string="Withholding Tax">
                        <group string="Withholding tax on salaries">
                            <group>
                                <field name="procedure_type"/>
                            </group>
                        </group>
                        <group string="Deductible withholding tax">
                            <group>
                                <field name="prepaid_medicine"/>
                                <field name="deduction_housing"/>
                                <field name="voluntary_pension_contribution"/>
                                <field name="voluntary_afc_contribution"/>
                                <field name="dependents"/>
                            </group>
                        </group>
                    </page>

                    <page name="change_control" string="Change Control" readonly="1">
                        <separator string="Salary"/>

                        <field name="control_salary_change_ids">
                            <tree>
                                <field name="name" width="20%"/>
                                <field name="validation_date" width="20%"/>
                                <field name="previous_salary" width="20%"/>
                                <field name="new_salary" width="20%"/>
                                <field name="state" width="20%"/>
                            </tree>
                        </field>

                        <separator string="Change Administrator"/>
                        <field name="control_administrator_change_ids">
                            <tree>
                                <field name="type_change_administrator" width="20%"/>
                                <field name="name" width="20%"/>
                                <field name="validation_date" width="20%"/>
                                <field name="previous_administrator_id" width="20%"/>
                                <field name="new_administrator_id" width="20%"/>
                                <field name="state" width="20%"/>
                            </tree>
                        </field>

                    </page>
                </page>

                <!-- Inherit fields or replace fields -->
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="readonly">1</attribute>
                    <attribute name="force_save">1</attribute>
                </xpath>

                <field name="structure_type_id" position="replace"/>

            </field>
        </record>

        <!-- Inherit tree view -->
        <record id="hr_payroll_intello_inherit_contract_view_form" model="ir.ui.view">
            <field name="name">hr_payroll_intello_inherit_contract_view_form</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_tree"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='date_end']" position="after">
                    <field name="contract_type"/>
                </xpath>

                <xpath expr="//field[@name='name']" position="after">
                    <field name="identification_id"/>
                </xpath>

            </field>
        </record>

    </data>
</odoo>